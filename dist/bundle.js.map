{"version":3,"sources":["webpack://react-self/./index.js","webpack://react-self/./react/Component.js","webpack://react-self/./react/CreateElement.js","webpack://react-self/./react/ReactDom.js","webpack://react-self/./react/diffandpatch.js","webpack://react-self/./react/pubsub.js","webpack://react-self/./react/utils.js","webpack://react-self/./src/counter.js","webpack://react-self/./src/inputbox.js","webpack://react-self/./src/list.js","webpack://react-self/./src/main.js","webpack://react-self/webpack/bootstrap","webpack://react-self/webpack/runtime/define property getters","webpack://react-self/webpack/runtime/hasOwnProperty shorthand","webpack://react-self/webpack/runtime/make namespace object","webpack://react-self/webpack/startup"],"names":["main","Main","ReactDom","getReactTree","document","getElementById","saveState","id","getId","key","setId","vid","get","State","Component","constructor","props","Math","floor","random","shouldComponentUpdate","setState","newstate","JSON","stringify","Object","keys","state","console","log","obj","assign","RerenderListener","getComponent","React","getJSX","iden","length","render","elem","args","isEvent","attr","evet","indexOf","createElement","type","children","Array","isArray","el","createDomElement","node","createTextNode","map","atr","toLowerCase","setAttribute","child","innerText","appendChild","oldtreeUtil","oldT","setOldtree","tree","getOldtree","TreeUtil","renderDom","reactElem","container","MainElem","rerender","bind","initialdomTree","newTree","oldTree","diffTree","diff","patch","CREATE","REMOVE","REPLACE","UPDATE","SET_PROP","REMOVE_PROP","changed","node1","node2","diffProps","newNode","oldNode","patches","forEach","name","newVal","oldVal","push","value","diffChildren","patchesLength","max","i","d","undefined","v","setProp","target","removeProp","removeAttribute","patchProps","parent","propPatch","index","childNodes","newEl","removeChild","replaceChild","rep","cloneNode","updateInput","rerenderApp","Obj","subscribe","func","publish","dom","AddButton","class","onClick","increment","Counter","InputBox","onKeyUp","changeHandler","DeleteButton","deleteHandler","List","handleDelete","todo","todoList","clickHandler","evt","newList","splice"],"mappings":"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","file":"bundle.js","sourcesContent":["import ReactDom from './react/ReactDom';\nimport { getReactTree } from './react/utils';\nimport Main from './src/main';\n\nconst main = new Main();\n\nReactDom.renderDom(\n    getReactTree(Main), // <Main />\n    document.getElementById('app'),\n    Main\n)","import { RerenderListener } from \"./pubsub\";\nimport React from \"./CreateElement\";\nimport { getReactTree } from './utils';\n\nfunction saveState() {\n    let id = {};\n    return {\n        getId: (key) => id[key],\n        setId: (key, vid) => id[key] = vid,\n        get: () => id\n    }\n}\n\nconst State = saveState();\n\nexport default class Component {\n\n    // this.key;\n\n    constructor(props, key) {\n        this.props = { ...props };\n        if(!this.key) {\n            this.key = Math.floor(Math.random() * 100)\n        } else {\n            this.key = key\n        }\n    }\n\n    shouldComponentUpdate() {\n        return true;\n    }\n\n    setState(newstate) {\n\n        const key = JSON.stringify(Object.keys(this.state))\n\n        console.log(\"A state : \", this, key, State.get(), this.key);\n\n        const obj = State.getId(key);\n        if(!obj) {\n            State.setId(key , Object.assign({}, this.state));\n        }\n        \n        State.setId(key , Object.assign({}, State.getId(key), newstate));\n\n        this.state = { ...this.state, ...newstate };\n\n        RerenderListener.publish('rerender');\n    }\n\n    getComponent() {\n        return React.createDomElement(this.getJSX());\n    }\n\n    getJSX(iden) {\n        if(this.state && Object.keys(this.state).length > 0 && State.getId(JSON.stringify(Object.keys(this.state)))) {\n            console.log(\"A: \", this.state, Object.keys(this.state).length, State.getId(JSON.stringify(Object.keys(this.state))))\n            this.state = {...State.getId(JSON.stringify(Object.keys(this.state)))};\n        }\n        return this.render();\n    }\n\n    getReactTree(elem, args) {\n        // console.log(\"AF: \", this);\n        return getReactTree(elem, args, this)\n    }\n\n    render() { }\n}","\nfunction isEvent(attr) {\n    const evet = [\n        'onClick',\n        'onChange',\n        'onKeyUp',\n        // 'value'\n    ];\n    if (evet.indexOf(attr) > -1) {\n        return true;\n    }\n    return false;\n}\n\nexport function createElement(type, attr, children = []) {\n    if (!Array.isArray(children)) {\n        children = [children];\n    }\n    const el = {\n        type,\n        attr,\n        // dataid: `${type}`,\n        children\n    }\n    return el;\n}\n\nexport function createDomElement(node) {\n    if (typeof node === 'string' || typeof node === 'number') {\n        return document.createTextNode(node)\n    }\n\n    const { type, attr, children } = node;\n    const el = document.createElement(type);\n    Object.keys(attr).map((atr) => {\n        if (isEvent(atr)) {\n            el[atr.toLowerCase()] = attr[atr];\n        } else {\n            el.setAttribute(atr, attr[atr]);\n        }\n    });\n    if(!children) {\n        return el;\n    }\n    if (!Array.isArray(children)) {\n        children = [children];\n    }\n    children.map(child => {\n        if (typeof child === 'number' || typeof child === 'string') {\n            el.innerText = child;\n            return;\n        }\n        el.appendChild(createDomElement(child));\n    });\n    return el;\n}\n\nconst React = {\n    createElement,\n    createDomElement\n}\n\nexport default React;","\nimport { RerenderListener } from './pubsub';\nimport { getReactTree } from './utils';\n// import Main from '../src/main';\nimport { createDomElement } from './CreateElement';\nimport { diff, patch } from './diffandpatch';\n\nfunction oldtreeUtil() {\n    let oldT = {};\n    return {\n        setOldtree: (tree) => oldT = tree,\n        getOldtree: () => oldT\n\n    }\n}\n\nconst TreeUtil = oldtreeUtil();\n\nexport function renderDom(reactElem, container, MainElem) {\n    RerenderListener.subscribe('rerender', rerender.bind([container, MainElem]));\n    TreeUtil.setOldtree(reactElem);\n\n    // console.log(\"A: \", reactElem, );\n\n    const initialdomTree = createDomElement(reactElem);\n\n    container.appendChild(initialdomTree);\n\n}\n\nfunction rerender() {\n    const newTree = getReactTree(this[1]);\n    const oldTree = TreeUtil.getOldtree();\n\n    const diffTree = diff(newTree, oldTree);\n\n    console.log(\"Ab: \", newTree, oldTree, diffTree);\n\n    patch(this[0], diffTree);\n    TreeUtil.setOldtree(newTree);\n    // oldTree = newTree;\n}\n\n\n\n\nexport default {\n    renderDom\n}","import { createElement, createDomElement } from \"./CreateElement\"\n\nconst CREATE = 'CREATE'\nconst REMOVE = 'REMOVE'\nconst REPLACE = 'REPLACE'\nconst UPDATE = 'UPDATE'\nconst SET_PROP = 'SET_PROP'\nconst REMOVE_PROP = 'REMOVE_PROP'\n\nfunction changed(node1, node2) {\n    return typeof node1 !== typeof node2 ||\n        typeof node1 === 'string' && node1 !== node2 ||\n        typeof node1 === 'number' && node1 !== node2 ||\n        node1.type !== node2.type\n}\n\nfunction diffProps(newNode, oldNode) {\n    const patches = []\n    const props = Object.assign({}, newNode.attr, oldNode.attr)\n    Object.keys(props).forEach(name => {\n        const newVal = newNode.attr[name]\n        const oldVal = oldNode.attr[name]\n        if (typeof oldVal === 'function') {\n\n        } else\n            if (!newVal) {\n                patches.push({ type: REMOVE_PROP, name, value: oldVal })\n            } else if (!oldVal || newVal !== oldVal) {\n                patches.push({ type: SET_PROP, name, value: newVal })\n            }\n    })\n    return patches\n}\n\nfunction diffChildren(newNode, oldNode) {\n    const patches = []\n    const patchesLength = Math.max(\n        newNode.children.length,\n        oldNode.children.length\n    )\n    for (let i = 0; i < patchesLength; i++) {\n        const d = diff(\n            newNode.children[i],\n            oldNode.children[i]\n        );\n        d ? patches.push(d) : ''\n    }\n    return patches\n}\n\nexport function diff(newNode, oldNode) {\n    // @Todo:  it fails when oldNode = 0\n    if (oldNode === undefined || oldNode === null) {\n        return { type: CREATE, newNode }\n    }\n    if (oldNode === undefined || oldNode === null) {\n        return { type: REMOVE }\n    }\n    if (changed(newNode, oldNode)) {\n        return { type: REPLACE, newNode }\n    }\n    if (newNode.type) {\n        return {\n            v: newNode.type,\n            type: UPDATE,\n            attr: diffProps(newNode, oldNode),\n            children: diffChildren(newNode, oldNode),\n        }\n    }\n}\n\nfunction setProp(target, name, value) { //@\n    // if (name === 'className') {\n    //     return target.setAttribute('class', value)\n    // }\n    if (name === 'value') {\n        return target.value = value;\n    }\n    target.setAttribute(name, value)\n}\n\n\n// Start with the last line,\n// then className\nfunction removeProp(target, name, value) {\n    // if (name === 'className') {\n    //     return target.removeAttribute('class')\n    // }\n    target.removeAttribute(name)\n}\n\nfunction patchProps(parent, patches) {\n    for (let i = 0; i < patches.length; i++) {\n        const propPatch = patches[i]\n        const { type, name, value } = propPatch\n        if (type === SET_PROP) {\n            setProp(parent, name, value)\n        }\n        if (type === REMOVE_PROP) {\n            removeProp(parent, name, value)\n        }\n    }\n}\n\nexport function patch(parent, patches, index = 0) { //@\n    if (!patches) { return }\n    const el = parent.childNodes[index]\n    // console.log(\"EL: \", el, patches);\n    switch (patches.type) {\n        case CREATE: {\n            const { newNode } = patches\n            const newEl = createDomElement(newNode)\n            return parent.appendChild(newEl)\n        }\n        case REMOVE: {\n            return parent.removeChild(el)\n        }\n        case REPLACE: {\n            const { newNode } = patches\n            const newEl = createDomElement(newNode)\n            return parent.replaceChild(newEl, el)\n        }\n        case UPDATE: {\n            const { attr, children } = patches\n            const rep = el.cloneNode();\n            patchProps(rep, attr)\n            \n            // if(patches.v === 'input') {\n            //     // const newEl = createDomElement({type: patches.type, })\n            //     return parent.replaceChild(rep, el)\n            // }\n\n            for (let i = 0; i < children.length; i++) {\n                patch(el, children[i], i)\n            }\n        }\n    }\n}\n\nfunction updateInput(patches) {\n    if(patches.type === 'input') {\n        return parent.replaceChild(newEl, el)\n    }\n}","\n\nfunction rerenderApp() {\n\n    const Obj = {};\n\n    return {\n        subscribe: (key, func) => {\n            if(!Obj[key]) {\n                Obj[key] = func;\n            }\n        },\n        publish: (key, args) => {\n            if(Obj[key]) {\n                Obj[key](args);\n            }\n        }\n    }\n    \n}\n\nexport const RerenderListener = rerenderApp();\n","export function getReactTree(elem, args) {\n    \n    // let key = 'root';\n    // if(con && con.key) {\n    //     key = con.key;\n    // }\n    // console.log(\"P: \", key);\n\n    let dom = null;\n    if(!dom) {\n        dom = new elem(args);\n    }\n\n    return (new elem(args)).getJSX()\n}\n\n// export function getJSXwithNewState(elem, args) {\n//     return (new elem(args)).getJSXwithNewState()\n// }","import Component from '../react/Component';\nimport { createElement } from '../react/CreateElement';\nimport { getReactTree } from '../react/utils';\n// import { getReactTree } from '../react/utils';\n\nclass AddButton extends Component {\n    render() {\n        return createElement('span', {class: 'button', onClick: this.props.increment}, [\n            '+'\n        ]);\n    }\n}\n\nclass Counter extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            value: 5\n        }\n        this.increment = this.increment.bind(this);\n    }\n\n    increment() {\n        console.log(\"A: add \", this);\n        this.setState({\n            value: this.state.value + 1\n        })\n    }\n    render() {\n        console.log(\"A Counter Render: \", this);\n        return createElement('div', { class: 'list' }, [\n            createElement('div', {class: 'todo'} , [\n                this.state.value,\n                getReactTree(AddButton, {increment: this.increment})\n            ])\n        ]);\n    }\n}\n\nexport default Counter;","import Component from '../react/Component';\nimport { createElement } from '../react/CreateElement';\n\nclass InputBox extends Component {\n    constructor(props) {\n        super(props);\n    }\n    render() {\n        return createElement('input', { class: 'text', value: this.props.value, onKeyUp: this.props.changeHandler });\n    }\n}\n\nexport default InputBox;","import Component from '../react/Component';\nimport { createElement } from '../react/CreateElement';\nimport { getReactTree } from '../react/utils';\n// import { getReactTree } from '../react/utils';\n\nclass DeleteButton extends Component {\n    render() {\n        return createElement('span', {class: 'button', onClick: this.props.deleteHandler}, [\n            'X'\n        ]);\n    }\n}\n\nclass List extends Component {\n    constructor(props) {\n        super(props);\n        this.handleDelete = this.handleDelete.bind(this);\n    }\n\n    handleDelete() {\n        this.props.deleteHandler(this.props.index);\n    }\n\n    render() {\n        return createElement('div', {class: 'list'}, [\n            createElement('div', {class: 'todo'} , [\n                this.props.todo,\n                getReactTree(DeleteButton, {deleteHandler: this.handleDelete})\n            ])\n            \n        ]);\n    }\n}\n\nexport default List;","import Component from '../react/Component';\nimport React, { createElement } from '../react/CreateElement';\nimport List from './list';\n// import { getReactTree } from '../react/utils';\nimport InputBox from './inputbox';\nimport Counter from './counter';\nimport { getReactTree } from '../react/utils';\n\nclass Main extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            value: '',\n            todoList: [\"Todo 1\"],\n        }\n        this.clickHandler = this.clickHandler.bind(this)\n        this.changeHandler = this.changeHandler.bind(this)\n        this.deleteHandler = this.deleteHandler.bind(this)\n    }\n\n    // shouldComponentUpdate() {\n    //     console.log(\"A: \");\n    //     return false;\n    // }\n\n    clickHandler() {\n        // console.log(\"E: \", this);\n        this.setState({\n            todoList: [...this.state.todoList, this.state.value],\n            value: '3'\n        });\n    }\n\n    changeHandler(evt) {\n        this.setState({\n            value: evt.target.value\n        });\n        // console.log(\"E: \", evt, evt.target.value)\n    }\n\n    deleteHandler(index) {\n        const newList = [...this.state.todoList];\n        newList.splice(index, 1)\n        console.log(\"Delete\", index)\n        this.setState({\n            todoList: newList,\n        });\n\n    }\n\n    // styled(type, value) {\n    //     console.log('AX: ', type, value);\n    //     return 2;\n    // }\n\n    render() {\n\n        return createElement('div', { class: 'container' },\n            createElement('div', { class: 'wrapper' },\n                [\n                    createElement('div', { class: 'bottom' },\n                    getReactTree(Counter, {}), // <Counter />\n                    ),\n                    createElement('div', { class: 'top' },\n                        [\n                            getReactTree(InputBox, { value: this.state.value, changeHandler: this.changeHandler }), // <Inputbox value={} />\n                            createElement('button', { class: 'button', onClick: this.clickHandler }, 'Click')\n                        ]\n                    ),\n                    // createElement('div', { class: 'bottom' },\n                    //     [this.state.value]\n                    // ),\n                    createElement('div', { class: 'bottom' },\n                        this.state.todoList.map((todo, index) => getReactTree(List, { todo, deleteHandler: this.deleteHandler, index }))\n                    )\n                ]\n            )\n\n        );\n    }\n}\n\nexport default Main;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./index.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}